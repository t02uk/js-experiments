{"source":{"css":"* {\n  margin: 0px;\n  padding: 0px;\n}\nbody {\n  background: #fff;\n}\n\ncanvas {\n  position: absolute;\n  left: 0px;\n  top: 0px;\n  width: 100%;\n  height: 100%;\n  /*overflow: hidden;*/\n}\n","html":"<canvas id='world'></canvas>","lisence":"MIT","js":"window.onload = function() {\n\tvar d = new DCore();\n\n\tfunction Ball() {\n\t\tBall.prototype.initialize.apply(this, $A(arguments));\n\t}\n\tBall.prototype = {\n\t\tinitialize: function() {\n\t\t\tthis.p = [$R(0, 1).randf(), 0];\n\t\t\tthis.s = [$R(-0.01, 0.01).randf(), $R(-0.08, 0.00).randf()];\n\t\t\tthis.bound = false;\n\t\t\tthis.binder = undefined;\n\t\t},\n\t\tact: function() {\n\t\t\tif(this.bound) {\n\t\t\t\tthis.binder.act();\n\t\t\t\tif(this.s[1] < 0) {\n\t\t\t\t\tif($R(0, 1).randf() < 0.08) {\n\t\t\t\t\t\tthis.binder.release();\n\t\t\t\t\t\tthis.bound = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.p = this.p.add(this.s);\n\t\t\t\tthis.s = this.s.mul(0.95);\n\t\t\t\tthis.s = this.s.add([0, 0.002]);\n\t\t\t}\n\t\t\tif(this.p[1] > 1) {\n\t\t\t\tthis.bound = false;\n\t\t\t\tif(this.s[1] > 0.01) {\n\t\t\t\t\tthis.s[1] *= -0.8;\n\t\t\t\t} else {\n\t\t\t\t\tthis.p[1] = -0.1;\n\t\t\t\t\t//this.initialize();\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(this.p[0] > 1) {\n\t\t\t\tif(this.bound) {\n\t\t\t\t\tthis.binder.rads *= -1.0;\n\t\t\t\t} else {\n\t\t\t\t\tthis.s[0] *= -0.9;\n\t\t\t\t\tthis.p[0] = 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(this.p[0] < 0) {\n\t\t\t\tif(this.bound) {\n\t\t\t\t\tthis.binder.rads *= 1.0;\n\t\t\t\t} else {\n\t\t\t\t\tthis.s[0] *= -0.9;\n\t\t\t\t\tthis.p[0] = 0;\n\t\t\t\t}\n\t\t\t\t//this.bound = false;\n\t\t\t}\n\n\t\t\tif(!this.bound) {\n\t\t\t\tif(this.p[1] > 0.2 && this.s.abs() > 0.015) {\n\t\t\t\t\tif($R(0, 1).randf() < 0.05) {\n\t\t\t\t\t\tthis.binder = new Binder(this);\n\t\t\t\t\t\tthis.bound = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tdraw: function() {\n\t\t\td\n\t\t\t .rgb(0xaa, 0xaa, 0xaa)\n\t\t\t .circle(this.p, 0.02)\n\t\t\t .fill()\n\t\t\t;\n\n\t\t\tif(this.bound) {\n\t\t\t\td\n\t\t\t\t .rgb(0xdd, 0xdd, 0xdd)\n\t\t\t\t .line([this.p, this.binder.p])\n\t\t\t\t .stroke()\n\t\t\t\t;\n\t\t\t\tthis.binder.draw();\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction Binder(bindee) {\n\t\tthis.bindee = bindee;\n\t\tvar bp = bindee.p;\n\t\tvar bs = bindee.s;\n\t\tvar l = 10;\n\t\tvar sign = [-1, 1][$R(0, 1).rand()];\n\t\tif(bp[0] > 0.5) {\n\t\t\tsign = 1;\n\t\t} else if(bp[0] < 0.5) {\n\t\t\tsign = -1;\n\t\t}\n\t\tthis.sign = sign;\n\t\tthis.p = bp.add([-sign * bs[1] * l, sign * bs[0] * l]);\n\t\tthis.pl = bp.distance(this.p);\n\t\tthis.sl = bs.abs();\n\t\tvar np = bp.sub(this.p);\n\t\tthis.radp = Math.atan2(np[1], np[0]);\n\t\tthis.rads = sign * (this.sl / this.pl);\n\t}\n\n\tBinder.prototype = {\n\t\tact: function() {\n\t\t\tvar t = this.bindee;\n\t\t\tthis.radp += this.rads;\n\t\t\tvar op = t.p.clone();\n\t\t\tt.p = this.p.add([this.pl, 0].rotate(this.radp));\n\t\t\tt.s = t.p.sub(op);\n\t\t\tif(Math.cos(this.radp) > 0) {\n\t\t\t\tthis.rads += 0.003;\n\t\t\t} else {\n\t\t\t\tthis.rads -= 0.003;\n\t\t\t}\n\t\t},\n\t\trelease: function() {\n\t\t\tvar t = this.bindee;\n\t\t},\n\t\tdraw: function() {\n\t\t\td\n\t\t\t .rgb(0x99, 0x99, 0x99)\n\t\t\t .circle(this.p, 0.01)\n\t\t\t .fill()\n\t\t\t;\n\t\t}\n\t};\n\n\tvar balls = $R(1, 9).map(function() { return new Ball();});\n\tvar sd = d.subTexture();\n\n\n\t(function() {\n\t\td\n\t\t .blend(\"lighter\")\n\t\t .alpha(0.04)\n\t\t .rgb(0xff, 0xff, 0xff)\n\t\t .fillBack()\n\t\t .blend(\"source-over\")\n\t\t .alpha(1)\n\t\t;\n\n\n\t\tballs.each(function(e) {\n\t\t\te.act();\n\t\t\te.draw();\n\t\t});\n\n\n\t\twindow.setTimeout(arguments.callee, 16);\n\t})();\n};\n"},"thumbnail":{"wide":"http://jsdo-static-contents.s3.amazonaws.com/images/capture/b/I/L/bILV_w.jpg","465":"http://jsdo-static-contents.s3.amazonaws.com/images/capture/b/I/L/bILV.jpg","100":"http://jsdo-static-contents.s3.amazonaws.com/images/capture/b/I/L/bILV_100.jpg"},"description_html":"","modified_date":"2012-04-15 12:59:28","uid":"bILV","created_date":"2012-04-14 22:53:13","path":"bILV","description":"","statistic":{"forked":"1","favorite":"4","pageview":"2519"},"user":{"icon":"http://jsdo-static-contents.s3.amazonaws.com/images/icon/b/4/2/c/b42cc3dd3312505b680411b3ead08e2dbc4192e4_100.jpg","name":"crispy"},"url":"http://jsdo.it/crispy/bILV","title":"trapezes--"}