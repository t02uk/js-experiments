{"source":{"css":"body { background-color: #000000; font: 30px sans-serif; }","html":"<canvas id=\"testCanvas\" width=\"850\" height=\"500\"></canvas>\n","lisence":"MIT","js":"// forked from keiji.shimada's \"spinWatch\" http://jsdo.it/keiji.shimada/pxby\nvar timerID;\nvar cW = 850; //canbasの幅\nvar cH = 500; //canbasの高さ\nvar centerY = cH / 2; //回転の中心点Y\n// 分の設定\nvar minuteRadius = 180; //分半径の長さ\nvar minuteCenterX = 200;\n//秒の設定\nvar secRadius = 180; //秒半径の長さ\nvar secCenterX = 610; //回転の中心点X\n// 時間の設定\nvar hourRadius = 100;\nvar hourCenterX = minuteCenterX + 30;\n// ミリ秒の設定\nvar startRadius = 10;\n\nvar angleSpeed = 6; //角度の速度\nvar millAngleSpeed = 12;\nvar hourAngleSpeed = 15; //角度の速度\nvar per = Math.PI;\nvar startAngle = 0; //開始角度\nvar angle = startAngle;\nvar objX;\nvar objY;\nvar maxAlpha = 1;//最大アルファ値\nvar defScall = 20; //オブジェクトのデフォルトサイズ\nvar canvas = document.getElementById('testCanvas');\nvar ctx = canvas.getContext('2d');\n\nwindow.onload = function(){\n    setTimer();\n};\nfunction setTimer(){\n    clearInterval(timerID);\n    timerID = setInterval(\"draw()\", 10);\n}\n\nfunction draw(){\n\n    var dNow = new Date();\n    var sHour = dNow.getHours();\n    var sMinute = dNow.getMinutes();\n    var sSecond = dNow.getSeconds();\n    var sMill = dNow.getMilliseconds();\n    if (sHour < 10) \n        sHour = \"0\" + sHour;\n    if (sMinute < 10) \n        sMinute = \"0\" + sMinute;\n    if (sSecond < 10) \n        sSecond = \"0\" + sSecond;\n  if (sMill < 10) \n        sMill = \"0\" + sMill;\n    \n    ctx.clearRect(0, 0, cW, cH);\n    ctx.fillStyle = '#FFFFFF';\n    ctx.beginPath();\n    sNow = sHour + \":\" + sMinute + \":\" + sSecond;\n    ctx.font = \"22pt Cursive\";\n    ctx.fillText(\":\", secCenterX - secRadius - 22, centerY + 4);\n    ctx.fillText(\":\", minuteCenterX + minuteRadius - 22, centerY + 4);\n  ctx.fillText(\":\", secCenterX - secRadius + 28, centerY + 4);\n  drawMillSec(\"\" + sMill);\n    drawSecond(sSecond, sMill);\n    drawMinute(sMinute, sSecond, sMill);\n    drawHour(sHour, sMinute, sSecond, sMill);\n    ctx.closePath();\n}\n\nfunction drawMillSec(mill){\n    var radius = startRadius;\n    mill = mill.substring(0, 2);\n    //一番はじめの数字\n    start = mill - 1;\n    var adjustX = 0;\n    if (start < 0) \n        start = 99;\n    for (var i = 0; i < 100; i++) {\n        ctx.font = (~~(start / 10) + 4) + \"pt Cursive\";\n        if (i == 99) {\n            adjustX = -10;\n            ctx.font = \"22pt Cursive\";\n        }\n        var ang = i * millAngleSpeed + 69;\n        var x = Math.cos(ang / 360 * 2 * Math.PI) * radius + secCenterX + adjustX;\n        var y = Math.sin(ang / 360 * 2 * Math.PI) * radius + centerY;\n        setHsl((~~(start / 10) / 10), 0.5, i / 200);\n        ctx.fillText(start, x, y);\n        //どんどん減っていく\n        start--;\n        if (start < 0) \n            start = 99;\n        radius += 1.2;\n    }\n}\n\nfunction drawSecond(sec, mills){\n    for (var i = 0; i < 60; i++) {\n        var adjustX = 0;\n        var addAngle = 30;\n        ctx.font = \"8pt Cursive\";\n        if (i == 0) {\n            adjustX = -10;\n            addAngle = 29.7;\n            ctx.font = \"22pt Cursive\";\n            if(mills < 100) {\n              adjustX -= Math.sin(mills / 10) * 10 * Math.random();\n            }\n        }\n        var x = Math.cos((i + 30) * angleSpeed / 360 * 2 * Math.PI) * secRadius + secCenterX + adjustX;\n        var y = Math.sin((i + addAngle) * angleSpeed / 360 * 2 * Math.PI) * secRadius + centerY;\n        setHsl(sec / 60, 0.5, 0.5);\n        ctx.fillText(sec, x, y);\n        sec++;\n        if (sec == 60) {\n            sec = 0;\n        }\n    }\n    ctx.fillStyle = '#FFFFFF';\n}\n\nfunction drawMinute(minute, sec, mills){\n    for (var i = 0; i < 60; i++) {\n    \n        var adjustX = 0;\n        var addAngle = 30;\n        ctx.font = \"8pt Cursive\";\n        if (i == 0) {\n            adjustX = -10;\n            addAngle = 29.7;\n            ctx.font = \"22pt Cursive\";\n            if(mills < 100 && sec < 1) {\n              adjustX -= Math.sin(mills / 10) * 10 * Math.random();\n            }\n        }\n        var x = Math.cos((i) * angleSpeed / 360 * 2 * Math.PI) * minuteRadius + minuteCenterX + adjustX;\n        var y = Math.sin((i + addAngle) * angleSpeed / 360 * 2 * Math.PI) * minuteRadius + centerY;\n        setHsl(minute / 60, 0.5, 0.5);\n        ctx.fillText(minute, x, y);\n        minute++;\n        if (minute == 60) {\n            minute = 0;\n        }\n    }\n}\n\nfunction drawHour(hour, minute, sec, mills){\n    for (var i = 0; i < 24; i++) {\n    \n        var adjustX = 0;\n        var addAngle = 0;\n        ctx.font = \"8pt Cursive\";\n        if (i == 0) {\n            adjustX = -10;\n            addAngle = 0.2;\n            ctx.font = \"22pt Cursive\";\n            if(mills < 100 && sec < 1 && minute < 1) {\n              adjustX -= Math.sin(mills / 10) * 10 * Math.random();\n            }\n        }\n        var x = Math.cos((i) * hourAngleSpeed / 360 * 2 * Math.PI) * hourRadius + hourCenterX + adjustX;\n        var y = Math.sin((i + addAngle) * hourAngleSpeed / 360 * 2 * Math.PI) * hourRadius + centerY;\n        setHsl(hour / 24, 0.5, 0.5);\n        ctx.fillText(hour, x, y);\n        hour++;\n        if (hour == 24) {\n            hour = 0;\n        }\n    }\n}\n          \nfunction setHsl(h, s, l) {\n  h = (~~(h * 360)) % 360;\n  s = (~~(s * 100)) + \"%\";\n  l = (~~(l * 100)) + \"%\";\n  ctx.fillStyle = \"hsl(\" + [h, s, l].join(\", \") + \")\";\n  ctx.strokeStyle = \"hsl(\" + [h, s, l].join(\", \") + \")\";\n}\n\n"},"thumbnail":{"wide":"http://jsdo-static-contents.s3.amazonaws.com/images/capture/f/J/T/fJTU_w.jpg","465":"http://jsdo-static-contents.s3.amazonaws.com/images/capture/f/J/T/fJTU.jpg","100":"http://jsdo-static-contents.s3.amazonaws.com/images/capture/f/J/T/fJTU_100.jpg"},"description_html":"ぎらぎら回転してだんだん気持ち悪くなる時計。ごめんなさい。","parent":{"thumbnail":{"wide":"http://jsdo-static-contents.s3.amazonaws.com/images/capture/p/x/b/pxby_w.jpg","465":"http://jsdo-static-contents.s3.amazonaws.com/images/capture/p/x/b/pxby.jpg","100":"http://jsdo-static-contents.s3.amazonaws.com/images/capture/p/x/b/pxby_100.jpg"},"modified_date":"2011-01-07 00:43:33","uid":"pxby","created_date":"2011-01-06 20:25:29","path":"pxby","description":"くるくる回転してだんだん眠くなる時計","statistic":{"forked":"6","favorite":"14","pageview":"5935"},"user":{"icon":"http://jsdo.it/img/common/img_user_anonymous.gif","name":"keiji.shimada"},"url":"http://jsdo.it/keiji.shimada/pxby","title":"spinWatch"},"modified_date":"2011-01-09 00:19:03","uid":"fJTU","created_date":"2011-01-08 18:11:02","path":"fJTU","description":"ぎらぎら回転してだんだん気持ち悪くなる時計。ごめんなさい。","statistic":{"forked":"1","favorite":"1","pageview":"2138"},"url":"http://jsdo.it/crispy/fJTU","user":{"icon":"http://jsdo-static-contents.s3.amazonaws.com/images/icon/b/4/2/c/b42cc3dd3312505b680411b3ead08e2dbc4192e4_100.jpg","name":"crispy"},"title":"spinWatchRainbow forked from: spinWatch"}