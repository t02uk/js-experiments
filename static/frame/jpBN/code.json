{"source":{"css":"body { background-color: #FFFFFF; font: 30px sans-serif; }","html":"<div id=\"outer\">\n<canvas id=\"world\"></canvas>\n</div>\n","lisence":"MIT","js":"$(function() {\n\n  // 動画読み込み\n  var video = $(\"<video>\")\n    .attr(\"src\", \"http://anyhub.net/file/1yxz-whiteletter.mp4\")\n    .width(0)\n    .attr(\"autoplay\", true);\n\n  var vw = 512;\n  var vh = 384;\n  var ratio = vh / vw;\n  var canplay = false;\n  video[0].addEventListener(\"canplay\", function(e) {\n    canplay = true;\n  });\n  $(\"#outer\").append(video);\n\n  \n  // canvas設定\n  var cw = 320;\n  var ch = 320 * ratio;\n  $(\"#world\")\n    .attr(\"width\", cw)\n    .attr(\"height\", ch)\n\n  \n  var canvas = $(\"#world\")[0].getContext(\"2d\");\n\n\n  // マウスイベント\n  var px, py;\n  window.addEventListener(\"mousemove\", function(e) {\n    px = e.clientX;\n    py = e.clientY;\n  }, false);\n\n  var c = 0;\n  window.setInterval(function() {\n      c++;\n\n      // on loading\n      if(!canplay) {\n        canvas.fillStyle = \"rgb(255, 255, 255)\";\n        canvas.rect(0, 0, cw, ch);\n        canvas.fill();\n\n        canvas.beginPath();\n        canvas.font = \"bold 10pt 'monospace'\";\n        canvas.textAlign = \"left\";\n        canvas.fillStyle = \"rgb(128, 128, 128)\";\n        canvas.globalCompositeOperation = \"copy\";\n        canvas.globalAlpha = 1.0;\n        canvas.fillText(\"now loading\" + \"...\".substring(0, (c / 3) % 8), 8, 20);\n        canvas.fill();\n        return;\n      }\n      // v else\n\n      // ノイズ\n      if(px && px < cw && py < ch) {\n        var nr = (1 - Math.sqrt(Math.pow(px - cw / 2, 2) + Math.pow(py - ch / 2, 2)) / cw - 0.4) * 3;\n      } else {\n        var nr = 0.0;\n      }\n      var n = (1 - Math.abs(Math.sin(c / 10)) * Math.abs(Math.sin(c / 13)) * Math.random()) * nr;\n\n      // 動画を転送(Alpha値込み)\n      canvas.globalCompositeOperation = \"source-over\";\n      canvas.globalAlpha = 0.85;\n      canvas.drawImage(video[0], 0, 0, vw, vh, 0, 0, cw, ch);\n      canvas.fill();\n\n      // ゴーストノイズ\n      canvas.globalAlpha = 0.15;\n      for(var y = 0; y < ch - 20;) {\n        var h = ~~(Math.random() * 13);\n        y += h;\n        if(y > vh - 10) break;\n        if(y < 0) continue;\n        if(h <= 0) h += 4;\n        if(Math.random() < 0.01) continue;\n        var offx = n * Math.random() * 30 - nr * 30 / 2 + n * 24 - nr * 13;\n        var offy = n * Math.random() * 4;\n        canvas.drawImage(video[0], 0, y / ch * vh, vw, h, offx, y + offy, cw, h);\n      }\n\n      // 無彩色を半透明コピーして彩度を下げる\n      canvas.globalCompositeOperation = \"source-over\";\n      canvas.globalAlpha = 0.2;\n      canvas.fillStyle = \"rgb(128, 128, 128)\";\n      canvas.beginPath();\n      canvas.rect(0, 0, cw, ch);\n      canvas.fill();\n\n      // ノイズ(縦線)\n      canvas.globalCompositeOperation = \"source-over\";\n      canvas.globalAlpha = 0.25;\n      canvas.fillStyle = \"rgb(128, 128, 128)\";\n      for(var i = 0; i < n * 32; i++) {\n        var x = ~~(Math.random() * cw);\n        var y = ~~(Math.random() * ch) - 40;\n        canvas.beginPath();\n        var r = Math.random() * Math.random();\n        canvas.rect(x, y, 1, r * 80);\n        canvas.fill();\n      }\n\n      // 上のテロップ\n      canvas.beginPath();\n      canvas.font = \"bold 10pt 'Serif'\";\n      canvas.textAlign = \"right\";\n      canvas.fillStyle = \"rgb(128, 128, 128)\";\n      canvas.globalCompositeOperation = \"copy\";\n      canvas.globalAlpha = 1.0;\n      canvas.fillText(\"アナログ\", cw - 8, 20);\n      canvas.fill();\n\n      // 下のテロップ\n      canvas.beginPath();\n      canvas.font = \"bold 10pt 'Serif'\";\n      canvas.textAlign = \"center\";\n      canvas.fillStyle = \"rgb(128, 128, 128)\";\n      canvas.globalCompositeOperation = \"copy\";\n      canvas.globalAlpha = 1.0;\n      canvas.fillText(\"地上アナログ放送は2011年7月に終了します\", cw / 2, ch - 10);\n      canvas.fill();\n\n    }, 33);\n});\n"},"thumbnail":{"wide":"http://jsdo-static-contents.s3.amazonaws.com/images/capture/j/p/B/jpBN_w.jpg","465":"http://jsdo-static-contents.s3.amazonaws.com/images/capture/j/p/B/jpBN.jpg","100":"http://jsdo-static-contents.s3.amazonaws.com/images/capture/j/p/B/jpBN_100.jpg"},"description_html":"デジタル放送→アナログ放送変換フィルタ。<br />\n・HTML5で追加されたVideo要素の電波受信状況を悪くする。<br />\n・マウスカーソルが出すノイズを強化する。<br />\n※Chromeだけで動作確認<br />\n<br />\n元の動画(【初音ミク】WhiteLetter【アニメＰＶ完成版】)はこっち。<br />\nニコニコ動画：<a  href=\"http://www.nicovideo.jp/watch/sm1379990\">http://www.nicovideo.jp/watch/sm1379990</a><br />\nyoutube: <a  href=\"http://www.youtube.com/watch?v=_MZeV3Q5mCc\">http://www.youtube.com/watch?v=_MZeV3Q5mCc</a>","modified_date":"2011-01-22 21:09:07","uid":"jpBN","created_date":"2011-01-22 18:51:58","path":"jpBN","description":"デジタル放送→アナログ放送変換フィルタ。\n・HTML5で追加されたVideo要素の電波受信状況を悪くする。\n・マウスカーソルが出すノイズを強化する。\n※Chromeだけで動作確認\n\n元の動画(【初音ミク】WhiteLetter【アニメＰＶ完成版】)はこっち。\nニコニコ動画：http://www.nicovideo.jp/watch/sm1379990\nyoutube: http://www.youtube.com/watch?v=_MZeV3Q5mCc","statistic":{"forked":"2","favorite":"2","pageview":"2710"},"user":{"icon":"http://jsdo-static-contents.s3.amazonaws.com/images/icon/b/4/2/c/b42cc3dd3312505b680411b3ead08e2dbc4192e4_100.jpg","name":"crispy"},"url":"http://jsdo.it/crispy/jpBN","title":"地アナ化"}