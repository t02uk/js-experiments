{"source":{"css":"* {\r\n    margin:0px; padding: 0px;\r\n}\r\nbody {\r\n    background-color: #000;\r\n    overflow: hidden;\r\n}\r\n\r\n","html":"<!--\r\njsdo.itでCoffeeScriptを試す場合のデモです\r\nJavaScript領域に前後を/*と*/でくくってCoffeeScriptを記述してください\r\njQueryが使用できます（他に必要なライブラリがあれば「＋」から読みこめば実行できます）\r\n-->\r\n<script src=\"http://coffeescript.org/extras/coffee-script.js\"></script>\r\n<script src=\"http://jsrun.it/lib/prototype-1.6.1/js\"></script>\r\n<script src=\"http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js\"></script>\r\n<script>\r\n$(function () {\r\n  var js = CoffeeScript.compile(jQuery('script:last').text().replace(/^[\\s\\S]*?\\/\\*/, '').replace(/\\*\\/\\s*$/, ''));\r\n  eval(js)\r\n});\r\n</script>\r\n<canvas id='world'></canvas>","lisence":"MIT","js":"/*\r\nwindow.onload = ->\r\n  d = new DCore()\r\n\r\n  class Branch\r\n    constructor: ->\r\n      [@p, @rad, @size] = $A(arguments)\r\n      @s = [@size, 0].rotate(@rad)\r\n      @sp = @s.mul(0.4)\r\n      @hue = $R(0, 0.3).randf()\r\n      @pe = @p.add(@sp.mul(5))\r\n      @life = 10\r\n      @setChildren() if @size * Math.random() > 0.016\r\n    act: ->\r\n      @life--\r\n      @p = @p.add(@sp)\r\n      @sp = @sp.add([0.0, 0.0002])\r\n      @sp = @sp.mul(0.9)\r\n      @pe = @p.add(@sp.mul(5).add(@s.mul(0.1)))\r\n    draw: ->\r\n      d\r\n       .hsv(@hue, 0.9, 1.0)\r\n       .blend(\"lighter\")\r\n       .alpha($R(0, 0.3).randf())\r\n       .quads([@p, @pe])\r\n       .lineWidth(0.003)\r\n       .stroke()\r\n    setChildren: ->\r\n      @children = $R(0, $R(0, 3).randf() + $R(0, 3).rand()).map () =>\r\n        new Branch(@pe, @rad + $R(0, 10).randf(), @size * $R(0.1, 0.8).randf())\r\n\r\n  class Tree\r\n    constructor: ->\r\n      @p = [$R(0.0, 0.01).randf(), 0].rotate($R(0, 100).randf()).add([0.5, 0.7])\r\n      @root = new Branch(@p, $R(0, 100).randf(), $R(0.01, 0.1).randf())\r\n    act: ->\r\n      @root.act()\r\n      @flatMap (x) ->\r\n        x.act()\r\n    draw: ->\r\n      @root.draw()\r\n      @flatMap (x) ->\r\n        x.draw()\r\n    flatMap: (func, x=@root) ->\r\n      x.children?.map (y) =>\r\n        func x\r\n        @flatMap(func, y) if y\r\n\r\n  trees = new Array(16).fill()\r\n\r\n  main = (cnt=0) ->\r\n    d\r\n     .blend(\"source-over\")\r\n     .alpha(1.0)\r\n     .rgb(0x11, 0x11, 0x22)\r\n     .fillBack()\r\n\r\n    d\r\n     .quads([[0.5, 0.0], [0.5, 0.7]])\r\n     .blend(\"source-over\")\r\n     .alpha(0.9)\r\n     .rgb(0x77, 0x55, 0x55)\r\n     .lineWidth(0.008)\r\n     .stroke()\r\n\r\n    (3.0).times (i) ->\r\n      p = [Math.sin(cnt * i) * 0.7, Math.cos(cnt * i)].mul(0.003)\r\n      d\r\n       .blend(\"lighter\")\r\n       .alpha(1.0)\r\n       .luminous([0.5, 0.7].add(p), 0.01, $R(0.015, 0.02).randf(), [\r\n         [0.0,  [$R(0, 0.3).randf(), 0.2, 0.9].hsv()]\r\n         [0.7,  [$R(0, 0.3).randf(), 0.7, 0.4].hsv()]\r\n         [1.0,  [0.0, 0.0, 0.0].hsv()]])\r\n      .fill()\r\n\r\n    d\r\n     .blend(\"lighter\")\r\n     .alpha(1.0)\r\n     .luminous([0.5, 0.7], 0.1, 0.3 + $R(0, 4).randf() * 0.003, [\r\n       [0.0,  [0.1, 0.1, 0.1].hsv()],\r\n       [0.2,  [0.2, 0.1, 0.1].hsv()],\r\n       [0.7,  [0.3, 0.1, 0.1].hsv()],\r\n       [1.0,  [0.0, 0.0, 0.0].hsv()]])\r\n    .fill()\r\n\r\n    (4.0).times () ->\r\n      trees.push(new Tree())\r\n      trees.shift()\r\n\r\n    trees.select (x) ->\r\n      x\r\n    .each (x) ->\r\n      x.act()\r\n      x.draw()\r\n\r\n    window.setTimeout(arguments.callee.curry(cnt+1), 33)\r\n\r\n  main()\r\n*/"},"thumbnail":{"wide":"http://jsdo-static-contents.s3.amazonaws.com/images/capture/u/8/n/u8n0_w.jpg","465":"http://jsdo-static-contents.s3.amazonaws.com/images/capture/u/8/n/u8n0.jpg","100":"http://jsdo-static-contents.s3.amazonaws.com/images/capture/u/8/n/u8n0_100.jpg"},"description_html":"","modified_date":"2016-01-17 21:24:10","uid":"u8n0","created_date":"2011-07-03 15:56:59","path":"u8n0","description":"","statistic":{"forked":"30","favorite":"40","pageview":"52574"},"user":{"icon":"http://jsdo-static-contents.s3.amazonaws.com/images/icon/b/4/2/c/b42cc3dd3312505b680411b3ead08e2dbc4192e4_100.jpg","name":"crispy"},"url":"http://jsdo.it/crispy/u8n0","title":"線香花火"}